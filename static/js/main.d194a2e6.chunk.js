(this.webpackJsonpsayit=this.webpackJsonpsayit||[]).push([[0],{25:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){},44:function(t,e,n){},46:function(t,e,n){},47:function(t,e,n){},48:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){},51:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var o=n(1),c=n.n(o),s=n(20),i=n.n(s),r=(n(33),n(34),n(6)),a=n(3),u=n(13),l="AUTHORIZE",d="DEAUTHORIZE",b="TOGGLE_REGISTER_MODAL",j="TOGGLE_LOGIN_MODAL",m="LOAD_POSTS",p="SET_SINGLE_POST",h="TOGGLE_EDIT_POST",f="EDIT_POST_INPUT",O="SET_POST_VOTE",g="SET_SINGLE_POST_VOTE",x="ADD_COMMENT",v="TOGGLE_REPLY_FORM",_="REPLY_INPUT",S="RESET_REPLY_INPUT",w="SET_DELETED_COMMENT",N="TOGGLE_EDIT_COMMENT",y="EDIT_COMMENT_INPUT",T="TOGGLE_SHOW_COMMENT",E="SET_SINGLE_POST_COMMENTS",C="SET_TOPICS",I="SET_ADDED_TOPIC",P="SET_SIDEBAR",L="TOGGLE_SIDEBAR",k="SET_ERROR",R="SET_SUCCESS",M="SET_LOADING",D="SET_TIMEOUT",A=function(t){return{type:k,error:t}},F=function(t){return{type:R,success:t}},G=function(t){return{type:M,loading:t}},z=function(t){return{type:D,timeout:t}},B=function(t){return{type:l,user_id:t}},U=function(){return function(t){t((localStorage.removeItem("token"),localStorage.removeItem("expires"),{type:d})),t(F("Logged out"))}},q=function(){return{type:b}},H=function(){return{type:j}},J="http://10.0.0.6:3000",V=n(2),Y=function(t){return{type:x,comment:t}},X=function(t){return{type:v,comment_id:t}},Z=function(t,e,n){return function(o){o(G(!0));var c=localStorage.getItem("token");fetch("".concat(J,"/comments/new"),{method:"POST",body:JSON.stringify({text:t,post_id:e,parent:n}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}}).then((function(t){return t.json()})).then((function(t){if(console.log(t),t.error)throw new Error(t.error);o(Y(t.comment)),o({type:S,comment_id:n}),o(X(n)),o(G(!1)),o(F(t.message))})).catch((function(t){o(G(!1)),o(A(t.message))}))}},W=function(t){return function(e){e(G(!0));var n=localStorage.getItem("token");fetch("".concat(J,"/comments/").concat(t,"/delete"),{method:"DELETE",body:JSON.stringify({comment_id:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}).then((function(t){return t.json()})).then((function(n){if(console.log(n),n.error)throw new Error(n.error);e(function(t){return{type:w,comment_id:t}}(t)),e(G(!1)),e(F(n.message))})).catch((function(t){e(G(!1)),e(A(t.message))}))}},K=function(t,e){return{type:N,comment_id:t,canceled:e}},Q=function(t){return{type:m,posts:t}},$=function(t,e){return{type:p,post:t}},tt=function(t){return function(e){e(G(!0)),e($({}));var n=localStorage.getItem("token"),o="";if(n){var c=Object(u.a)(n).sub;o+="?user_id=".concat(c)}fetch("".concat(J,"/posts/").concat(t).concat(o)).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);var n;e($(t.post)),e((n=t.comments,{type:E,comments:n})),e(G(!1))})).catch((function(t){e(A(t.message)),e(G(!1))}))}},et=function(t){return{type:h,canceled:t}},nt=function(t,e,n){return function(o){o(G(!0));var c=localStorage.getItem("token");fetch("".concat(J,"/posts/").concat(e,"/vote"),{method:"POST",body:JSON.stringify({post_id:e,vote:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}}).then((function(t){return t.json()})).then((function(c){if(c.error)throw new Error(c.error);o(n?function(t,e){return{type:g,vote:t,post_id:e}}(t,e):function(t,e){return{type:O,vote:t,post_id:e}}(t,e)),o(G(!1))})).catch((function(t){o(A(t.message)),o(G(!1))}))}},ot=function(t){return{type:C,topics:t}},ct=function(t){return function(e){e(G(!0)),fetch("".concat(J,"/posts/singletopic"),{method:"POST",body:JSON.stringify({topic:t}),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);e(function(t){return{type:I,topic:t}}(t.topic)),e(G(!1))})).catch((function(t){e(G(!1)),e(A(t.message))}))}},st=function(t,e,n){return{type:P,isHome:t,name:e,description:n}},it=function(){return{type:L}};function rt(){var t=Object(r.g)().pathname;return Object(o.useEffect)((function(){window.scrollTo(0,0)}),[t]),null}var at=n(4),ut=(n(44),n(0)),lt=Object(a.b)((function(t){return{isAuth:t.auth.isAuth,sidebar:t.sidebar.sidebar,sidebarShow:t.sidebar.show}}),(function(t){return{onToggleSidebar:function(){t(it())}}}))((function(t){return Object(ut.jsx)("nav",{className:"Nav",children:Object(ut.jsxs)("ul",{children:[Object(ut.jsx)("li",{children:Object(ut.jsx)(at.b,{to:"/",className:"nav-logo",onClick:t.sidebarShow?t.onToggleSidebar:null,children:"Sayit"})}),Object(ut.jsx)("button",{className:"menu-button",onClick:t.onToggleSidebar,"aria-label":"toggle-sidebar",children:t.sidebarShow?Object(ut.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:Object(ut.jsx)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})}):Object(ut.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:Object(ut.jsx)("path",{fillRule:"evenodd",d:"M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z"})})})]})})})),dt=function(t){var e=(Date.now()-new Date(t))/1e3;return e<60?"".concat(e.toFixed(0)," seconds ago"):e<3600?"".concat((e/60).toFixed(0)," minutes ago"):e<86400?"".concat((e/3600).toFixed(0)," hours ago"):e<31536e3?"".concat((e/86400).toFixed(0)," days ago"):"".concat((e/31536e3).toFixed(0)," years ago")},bt=Object(a.b)((function(t){return{isAuth:t.auth.isAuth,user_id:t.auth.user_id}}),(function(t){return{onSetError:function(e){t(A(e))},onPostVote:function(e,n,o){t(nt(e,n,o))}}}))((function(t){return Object(ut.jsxs)("div",{className:"post-votes",children:[Object(ut.jsx)("svg",{onClick:function(){return t.isAuth?1===t.user_vote?t.onPostVote(0,t.post_id,t.single_post):void t.onPostVote(1,t.post_id,t.single_post):t.onSetError("Login to vote")},className:t.user_id&&1===t.user_vote?"vote-up":null,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:Object(ut.jsx)("path",{d:"m7.247 4.86-4.796 5.481c-.566.647-.106 1.659.753 1.659h9.592a1 1 0 0 0 .753-1.659l-4.796-5.48a1 1 0 0 0-1.506 0z"})}),Object(ut.jsx)("p",{children:t.votes}),Object(ut.jsx)("svg",{onClick:function(){return t.isAuth?-1===t.user_vote?t.onPostVote(0,t.post_id,t.single_post):void t.onPostVote(-1,t.post_id,t.single_post):t.onSetError("Login to vote")},className:t.user_id&&-1===t.user_vote?"vote-down":null,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:Object(ut.jsx)("path",{d:"M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"})})]})})),jt=Object(a.b)((function(t){return{posts:t.posts.posts,user_id:t.auth.user_id}}),(function(t){return{onGetPosts:function(){t((function(t){t(G(!0)),t(Q([]));var e=localStorage.getItem("token"),n="";if(e){var o=Object(u.a)(e).sub;n="?user_id=".concat(o)}fetch("".concat(J,"/posts").concat(n)).then((function(t){return t.json()})).then((function(e){if(e.error)throw new Error(e.error);t(Q(e.posts)),t(G(!1))})).catch((function(e){t(A(e.message)),t(G(!1))}))}))},onSetSidebar:function(e,n,o){t(st(e,n,o))}}}))((function(t){Object(o.useEffect)((function(){t.onGetPosts(),t.onSetSidebar(!0,"","")}),[]);var e=t.posts.map((function(t,e){return Object(ut.jsxs)("li",{children:[Object(ut.jsx)("div",{className:"post-number",children:Object(ut.jsx)("p",{children:e+1})}),Object(ut.jsx)(bt,{post_id:t.post_id,votes:t.votes,user_vote:t.user_vote}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("div",{className:"post-title",children:Object(ut.jsx)(at.b,{to:"/topics/".concat(t.topic,"/").concat(t.post_id),children:t.title})}),Object(ut.jsxs)("p",{className:"post-subtitle",children:["submitted ",dt(t.time)," by"," ",Object(ut.jsx)(at.b,{className:"post-username",to:"/users/".concat(t.username),children:t.username})," ","in"," ",Object(ut.jsx)(at.b,{className:"post-topic",to:"/topics/".concat(t.topic),children:t.topic})]})]})]},t.post_id)}));return Object(ut.jsx)("section",{className:"Home",children:Object(ut.jsx)("ul",{className:"posts-list",children:e})})})),mt=n(10),pt=n(11),ht=(n(46),Object(a.b)((function(t){return{loading:t.flash.loading}}),(function(t){return{onUserRegister:function(e,n){t(function(t,e){return function(n){n(G(!0)),fetch("http://localhost:3000/register",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);localStorage.setItem("token",t.token);var o=Date.now()+Number(t.expiresIn);localStorage.setItem("expires",o);var c=Object(u.a)(localStorage.getItem("token"));n(B(c.sub)),n(q()),n(G(!1)),n(F(t.message)),e.push("/refresh"),e.goBack()})).catch((function(t){n(G(!1)),n(A(t.message))}))}}(e,n))},onToggleRegisterModal:function(){t(q())}}}))((function(t){var e=Object(o.useState)({username:"",password:"",confirmPassword:""}),n=Object(pt.a)(e,2),c=n[0],s=n[1],i=Object(r.f)(),a=function(t){s(Object(V.a)(Object(V.a)({},c),{},Object(mt.a)({},t.target.name,t.target.value)))};return Object(ut.jsx)("section",{className:"modal-wrapper",onClick:function(e){e.currentTarget===e.target&&t.onToggleRegisterModal()},children:Object(ut.jsxs)("div",{children:[Object(ut.jsx)("h1",{children:"Register"}),Object(ut.jsx)("button",{className:"modal-close-button",onClick:t.onToggleRegisterModal,"aria-label":"close form",children:Object(ut.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:Object(ut.jsx)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})})}),Object(ut.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),t.onUserRegister(c,i)},children:[Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"username",children:"Username"}),Object(ut.jsx)("input",{type:"text",name:"username",value:c.username,onChange:a,required:!0})]}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"password",children:"Password"}),Object(ut.jsx)("input",{type:"password",name:"password",value:c.password,onChange:a,required:!0,minLength:"8"})]}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),Object(ut.jsx)("input",{type:"password",name:"confirmPassword",value:c.confirmPassword,onChange:a,required:!0,minLength:"8"})]}),Object(ut.jsx)("button",{className:"basic-button",type:"submit","aria-label":"submit",disabled:t.loading?"disabled":null,children:"Register"})]})]})})}))),ft=Object(a.b)((function(t){return{loading:t.flash.loading}}),(function(t){return{onUserLogin:function(e,n){t(function(t,e){return function(n){n(G(!0)),fetch("http://localhost:3000/login",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);localStorage.setItem("token",t.token);var o=Date.now()+Number(t.expiresIn);localStorage.setItem("expires",o);var c=Object(u.a)(localStorage.getItem("token"));n(B(c.sub)),n(H()),n(G(!1)),n(F(t.message)),e.push("/refresh"),e.goBack()})).catch((function(t){n(G(!1)),n(A(t.message))}))}}(e,n))},onToggleLoginModal:function(){t(H())}}}))((function(t){var e=Object(o.useState)({username:"",password:""}),n=Object(pt.a)(e,2),c=n[0],s=n[1],i=Object(r.f)(),a=function(t){s(Object(V.a)(Object(V.a)({},c),{},Object(mt.a)({},t.target.name,t.target.value)))};return Object(ut.jsx)("section",{className:"modal-wrapper",onClick:function(e){e.currentTarget===e.target&&t.onToggleLoginModal()},children:Object(ut.jsxs)("div",{children:[Object(ut.jsx)("h1",{children:"Login"}),Object(ut.jsx)("button",{className:"modal-close-button",onClick:t.onToggleLoginModal,"aria-label":"close form",children:Object(ut.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:Object(ut.jsx)("path",{d:"M4.646 4.646a.5.5 0 0 1 .708 0L8 7.293l2.646-2.647a.5.5 0 0 1 .708.708L8.707 8l2.647 2.646a.5.5 0 0 1-.708.708L8 8.707l-2.646 2.647a.5.5 0 0 1-.708-.708L7.293 8 4.646 5.354a.5.5 0 0 1 0-.708z"})})}),Object(ut.jsxs)("form",{className:"auth-form",onSubmit:function(e){e.preventDefault(),t.onUserLogin(c,i)},children:[Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"username",children:"Username"}),Object(ut.jsx)("input",{type:"text",name:"username",value:c.username,onChange:a,required:!0})]}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"password",children:"Password"}),Object(ut.jsx)("input",{type:"password",name:"password",value:c.password,onChange:a,required:!0,minLength:"8"})]}),Object(ut.jsx)("button",{className:"basic-button",type:"submit","aria-label":"submit",disabled:t.loading?"disabled":null,children:"Login"})]})]})})})),Ot=(n(47),Object(a.b)((function(t){return{}}),(function(t){return{onNewPost:function(e,n){t(function(t,e){return function(n){n(G(!0));var o=localStorage.getItem("token");fetch("".concat(J,"/posts/new"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}}).then((function(t){return t.json()})).then((function(o){if(console.log(o),o.error)throw new Error(o.error);e.push("/topics/".concat(t.topic,"/").concat(o.post_id)),n(G(!1)),n(F(o.message))})).catch((function(t){n(A(t.message)),n(G(!1))}))}}(e,n))}}}))((function(t){var e=Object(r.f)(),n=Object(o.useState)({title:"",text:"",topic:""}),c=Object(pt.a)(n,2),s=c[0],i=c[1];Object(o.useEffect)((function(){e.location.state&&i(Object(V.a)(Object(V.a)({},s),{},{topic:e.location.state.topic}))}),[]);var a=function(t){i(Object(V.a)(Object(V.a)({},s),{},Object(mt.a)({},t.target.name,t.target.value)))};return Object(ut.jsxs)("section",{children:[Object(ut.jsx)("h1",{className:"page-title",children:"New Post"}),Object(ut.jsxs)("form",{className:"auth-form new-post-form",onSubmit:function(n){n.preventDefault(),t.onNewPost(s,e)},children:[Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"title",children:"Title*"}),Object(ut.jsx)("input",{type:"text",name:"title",value:s.title,onChange:a,required:!0})]}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"text",children:"Text"}),Object(ut.jsx)("textarea",{type:"text",name:"text",value:s.text,onChange:a,required:!0})]}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"topic",children:"Topic*"}),Object(ut.jsx)("input",{type:"text",name:"topic",value:s.topic,onChange:a,required:!0})]}),Object(ut.jsx)("button",{className:"basic-button",type:"submit","aria-label":"submit",children:"Submit"})]})]})}))),gt=(n(48),Object(a.b)((function(t){return{loading:t.flash.loading}}),(function(t){return{onNewTopic:function(e,n){t(function(t,e){return function(n){n(G(!0));var o=localStorage.getItem("token");t.name=t.name.split(" ").join("").toLowerCase(),fetch("".concat(J,"/newtopic"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}}).then((function(t){return t.json()})).then((function(o){if(console.log(o),o.error)throw new Error(o.error);e.push("/topics/".concat(t.name)),n(G(!0)),n(F(o.message))})).catch((function(t){n(G(!1)),n(A(t.message))}))}}(e,n))},onSetSidebar:function(e,n,o){t(st(e,n,o))}}}))((function(t){var e=Object(r.f)();Object(o.useEffect)((function(){t.onSetSidebar(!0,"","")}),[]);var n=Object(o.useState)({name:"",description:""}),c=Object(pt.a)(n,2),s=c[0],i=c[1],a=function(t){i(Object(V.a)(Object(V.a)({},s),{},Object(mt.a)({},t.target.name,t.target.value)))};return Object(ut.jsxs)("section",{children:[Object(ut.jsx)("h1",{className:"page-title",children:"New Topic"}),Object(ut.jsxs)("form",{className:"auth-form new-topic-form",onSubmit:function(n){n.preventDefault(),t.onNewTopic(s,e)},children:[Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"name",children:"Name*"}),Object(ut.jsx)("input",{type:"text",name:"name",value:s.name,onChange:a,required:!0,maxLength:"100"})]}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"text",children:"Description*"}),Object(ut.jsx)("input",{type:"text",name:"description",value:s.description,onChange:a,required:!0,maxLength:"255"})]}),Object(ut.jsx)("button",{className:"basic-button",type:"submit","aria-label":"submit",disabled:!!t.loading&&"disabled",children:"Submit"})]})]})}))),xt=Object(a.b)((function(t){return{posts:t.posts.posts,topics:t.topics.topics,error:t.flash.error,loading:t.flash.loading}}),(function(t){return{onGetTopicPosts:function(e){t(function(t){return function(e){e(G(!0)),e(Q([]));var n=localStorage.getItem("token"),o="";if(n){var c=Object(u.a)(n).sub;o+="?user_id=".concat(c)}fetch("".concat(J,"/posts/topics/").concat(t).concat(o)).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);e(Q(t.posts)),e(G(!1))})).catch((function(t){e(A(t.message)),e(G(!1))}))}}(e))},onAddTopic:function(e){t(ct(e))},onSetSidebar:function(e,n,o){t(st(e,n,o))}}}))((function(t){var e=Object(r.h)().topic;Object(o.useEffect)((function(){t.onGetTopicPosts(e)}),[e]),Object(o.useEffect)((function(){var n=-1;t.topics.length&&(n=t.topics.findIndex((function(t){return t&&t.name===e}))),-1===n&&t.onAddTopic(e),-1!==n&&t.onSetSidebar(!1,t.topics[n].name,t.topics[n].description)}),[e,t.topics]);var n=t.posts.map((function(t,e){return Object(ut.jsxs)("li",{children:[Object(ut.jsx)("div",{className:"post-number",children:Object(ut.jsx)("p",{children:e+1})}),Object(ut.jsx)("div",{className:"post-votes",children:Object(ut.jsx)(bt,{post_id:t.post_id,votes:t.votes,user_vote:t.user_vote})}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("div",{className:"post-title",children:Object(ut.jsx)(at.b,{to:"/topics/".concat(t.topic,"/").concat(t.post_id),children:t.title})}),Object(ut.jsxs)("p",{className:"post-subtitle",children:["submitted ",dt(t.time)," by"," ",Object(ut.jsx)(at.b,{className:"post-username",to:"/users/".concat(t.username),children:t.username})]})]})]},t.post_id)}));return Object(ut.jsxs)("section",{children:[Object(ut.jsx)("h1",{className:"page-title",children:e}),Object(ut.jsx)("ul",{className:"posts-list",children:n})]})})),vt=Object(a.b)((function(t){return{user_id:t.auth.user_id}}))((function(t){return t.user_id===t.creator_id?Object(ut.jsx)(c.a.Fragment,{children:t.children}):null})),_t=Object(a.b)((function(t){return{isAuth:t.auth.isAuth}}))((function(t){return t.isAuth?Object(ut.jsx)(c.a.Fragment,{children:t.children}):null})),St=Object(a.b)((function(t){return{loading:t.flash.loading}}),(function(t){return{onToggleReplyForm:function(e){t(X(e))},onCommentReply:function(e,n,o){t(Z(e,n,o))},onReplyInput:function(e,n){t(function(t,e){return{type:_,value:t,comment_id:e}}(e,n))},onDeleteComment:function(e){t(W(e))},onToggleEditComment:function(e,n){t(K(e,n))},onEditCommentInput:function(e,n){t(function(t,e){return{type:y,value:t,comment_id:e}}(e,n))},onEditComment:function(e,n){t(function(t,e){return function(n){n(G(!0));var o=localStorage.getItem("token");fetch("".concat(J,"/comments/").concat(e,"/edit"),{method:"PATCH",body:JSON.stringify({text:t,comment_id:e}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}}).then((function(t){return t.json()})).then((function(t){if(console.log(t),t.error)throw new Error(t.error);n(K(e)),n(G(!1))})).catch((function(t){n(G(!1)),n(A(t.message))}))}}(e,n))},onToggleShowComment:function(e){t(function(t){return{type:T,comment_id:t}}(e))}}}))((function t(e){var n=e.allComments.filter((function(t){return t.parent===e.comment.comment_id})),o=null;return e.comment.show&&(o=Object(ut.jsxs)(c.a.Fragment,{children:[e.comment.editing?Object(ut.jsxs)("form",{className:"edit-comment-form",onSubmit:function(t){t.preventDefault(),e.onEditComment(e.comment.text,e.comment.comment_id)},children:[Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"editComment"}),Object(ut.jsx)("textarea",{name:"text",id:"editComment",value:e.comment.text,onChange:function(t){return e.onEditCommentInput(t.target.value,e.comment.comment_id)},required:!0})]}),Object(ut.jsx)("button",{className:"basic-button",type:"submit",children:"Submit"}),Object(ut.jsx)("button",{className:"basic-button",type:"button",disabled:!!e.loading&&"disabled",onClick:function(){return e.onToggleEditComment(e.comment.comment_id,!0)},children:"Cancel"})]}):Object(ut.jsx)("div",{className:"comment-text",children:Object(ut.jsx)("p",{children:e.comment.text})}),Object(ut.jsxs)(_t,{children:[Object(ut.jsxs)("div",{className:"comment-buttons",children:[Object(ut.jsx)("button",{"data-index":e.index,disabled:!!e.loading&&"disabled",onClick:function(){return e.onToggleReplyForm(e.comment.comment_id)},children:"Reply"}),Object(ut.jsxs)(vt,{creator_id:e.comment.user_id,children:[Object(ut.jsx)("button",{type:"button","aria-label":"delete",disabled:!!e.loading&&"disabled",onClick:function(){return e.onDeleteComment(e.comment.comment_id)},children:"Delete"}),Object(ut.jsx)("button",{type:"edit","aria-label":"edit",disabled:!!e.loading&&"disabled",onClick:function(){return e.onToggleEditComment(e.comment.comment_id)},children:"Edit"})]})]}),e.comment.showReply?Object(ut.jsxs)("form",{className:"reply-form",onSubmit:function(t){t.preventDefault(),e.onCommentReply(e.comment.reply,e.post_id,e.comment.comment_id)},children:[Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"commentReply"}),Object(ut.jsx)("textarea",{name:"comment",id:"commentReply",placeholder:"Reply",value:e.comment.reply,onChange:function(t){return e.onReplyInput(t.target.value,e.comment.comment_id)},required:!0})]}),Object(ut.jsx)("button",{className:"basic-button",type:"submit","aria-label":"submit",disabled:!!e.loading&&"disabled",children:"Submit"}),Object(ut.jsx)("button",{className:"basic-button",type:"button","aria-label":"cancel",disabled:!!e.loading&&"disabled",onClick:function(){return e.onToggleReplyForm(e.comment.comment_id)},children:"Cancel"})]}):null]}),Object(ut.jsx)("ul",{children:n.map((function(n){return Object(ut.jsx)(t,{allComments:e.allComments,comment:n,post_id:e.post_id,loading:e.loading,onToggleReplyForm:e.onToggleReplyForm,onReplyInput:e.onReplyInput,onCommentReply:e.onCommentReply,onDeleteComment:e.onDeleteComment,onToggleEditComment:e.onToggleEditComment,onEditCommentInput:e.onEditCommentInput,onEditComment:e.onEditComment,onToggleShowComment:e.onToggleShowComment},n.comment_id)}))})]})),Object(ut.jsxs)("li",{className:"child",children:[Object(ut.jsxs)("p",{className:"comment-subtitle",children:[Object(ut.jsx)("button",{onClick:function(){return e.onToggleShowComment(e.comment.comment_id)},children:e.comment.show?"[\u2013]":"[+]"}),Object(ut.jsx)(at.b,{className:"post-username comment-username",to:"/users/".concat(e.comment.username),children:e.comment.username}),dt(e.comment.time)]}),e.comment.show?o:null]},e.comment.comment_id)})),wt=(n(49),Object(a.b)((function(t){return{posts:t.posts.posts,post:t.posts.post,comments:t.comments.comments,topics:t.topics.topics,loading:t.flash.loading}}),(function(t){return{onSetSinglePost:function(e){t($(e))},onGetSinglePost:function(e){t(tt(e))},onNewComment:function(e,n){t(function(t,e){return function(n){n(G(!0));var o=localStorage.getItem("token");fetch("".concat(J,"/comments/new"),{method:"POST",body:JSON.stringify(Object(V.a)(Object(V.a)({},t),{},{post_id:e})),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}}).then((function(t){return t.json()})).then((function(t){if(console.log(t),t.error)throw new Error(t.error);n(Y(t.comment)),n(G(!1)),n(F(t.message))})).catch((function(t){n(G(!1)),n(A(t.message))}))}}(e,n))},onDeletePost:function(e,n,o){t(function(t,e,n){return function(o){o(G(!0));var c=localStorage.getItem("token");fetch("".concat(J,"/posts/").concat(t,"/delete"),{method:"DELETE",body:JSON.stringify({post_id:t}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}}).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);e.push("/topics/".concat(n)),o(G(!1)),o(F(t.message))})).catch((function(t){o(A(t.message)),o(G(!1))}))}}(e,n,o))},onToggleEditPost:function(e){t(et(e))},onEditPostInput:function(e){t(function(t,e){return{type:f,value:t,post_id:e}}(e))},onEditPost:function(e,n){t(function(t,e){return function(n){n(G(!0));var o=localStorage.getItem("token");fetch("".concat(J,"/posts/").concat(e,"/edit"),{method:"PATCH",body:JSON.stringify({text:t,post_id:e}),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}}).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);n(et()),n(G(!1))})).catch((function(t){n(A(t.message)),n(G(!1))}))}}(e,n))},onSetSidebar:function(e,n,o){t(st(e,n,o))},onAddTopic:function(e){t(ct(e))}}}))((function(t){var e=Object(r.h)(),n=e.post_id,c=e.topic,s=Object(r.f)();Object(o.useEffect)((function(){t.post.post_id&&t.post.post_id===Number(n)||t.onGetSinglePost(n,c,s),t.post.post_id&&t.post.topic!==c&&s.replace("/topics/".concat(t.post.topic,"/").concat(n));var e=t.topics.findIndex((function(e){return e.name===t.post.topic}));t.post.topic&&-1===e&&t.onAddTopic(t.post.topic),t.post.topic&&-1!==e&&t.onSetSidebar(!1,t.topics[e].name,t.topics[e].description)}),[n,t.post.topic,t.topics]),Object(o.useEffect)((function(){}),[n]);var i=[];t.post.post_id&&Number(t.post.post_id)===Number(n)&&(i=Object(ut.jsxs)("div",{className:"single-post",children:[Object(ut.jsx)("div",{className:"post-votes",children:Object(ut.jsx)(bt,{post_id:t.post.post_id,votes:t.post.votes,user_vote:t.post.user_vote,single_post:!0})}),Object(ut.jsxs)("div",{className:"post-details",children:[Object(ut.jsx)("div",{className:"post-title",children:Object(ut.jsx)(at.b,{to:"/topics/".concat(t.post.topic,"/").concat(t.post.post_id),children:t.post.title})}),Object(ut.jsxs)("p",{className:"post-subtitle",children:["submitted ",dt(t.post.time)," by"," ",Object(ut.jsx)(at.b,{className:"props.post-username",to:"/users/".concat(t.post.username),children:t.post.username})]}),t.post.editing?Object(ut.jsxs)("form",{className:"edit-post-form",onSubmit:function(e){e.preventDefault(),t.onEditPost(t.post.text,t.post.post_id)},children:[Object(ut.jsx)("label",{htmlFor:"editPost","aria-label":"edit post"}),Object(ut.jsx)("textarea",{id:"editPost",name:"text",value:t.post.text.toString(),onChange:function(e){return t.onEditPostInput(e.target.value)}}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("button",{className:"basic-button",type:"submit",disabled:!!t.loading&&"disabled",children:"Submit"}),Object(ut.jsx)("button",{className:"basic-button",type:"button","aria-label":"cancel",disabled:!!t.loading&&"disabled",onClick:function(){return t.onToggleEditPost(!0)},children:"Cancel"})]})]}):Object(ut.jsx)("div",{className:"post-text",children:Object(ut.jsx)("p",{children:t.post.text})}),Object(ut.jsx)(vt,{creator_id:t.post.user_id,children:Object(ut.jsxs)("div",{className:"comment-buttons",children:[Object(ut.jsx)("button",{type:"button","aria-label":"delete post",disabled:!!t.loading&&"disabled",onClick:function(){return t.onDeletePost(n,s,c)},children:"Delete"}),Object(ut.jsx)("button",{type:"button","aria-label":"edit post",disabled:!!t.loading&&"disabled",onClick:function(){return t.onToggleEditPost()},children:"Edit"})]})})]})]}));var a=Object(o.useState)({text:""}),u=Object(pt.a)(a,2),l=u[0],d=u[1],b=t.comments.filter((function(t){return!t.parent})).map((function(e){return Object(ut.jsx)(St,{allComments:t.comments,comment:e,post_id:n},e.comment_id)}));return Object(ut.jsxs)("section",{children:[i,t.post.post_id?Object(ut.jsxs)("div",{className:"comments-section",children:[Object(ut.jsx)("h2",{children:"Comments"}),Object(ut.jsx)(_t,{children:Object(ut.jsxs)("form",{className:"new-comment-form",onSubmit:function(e){e.preventDefault(),t.onNewComment(l,n),d({text:""})},children:[Object(ut.jsxs)("div",{children:[Object(ut.jsx)("label",{htmlFor:"newComment","aria-label":"new comment"}),Object(ut.jsx)("textarea",{name:"text",id:"newComment",placeholder:"New Comment",value:l.text,onChange:function(t){d(Object(V.a)(Object(V.a)({},l),{},Object(mt.a)({},t.target.name,t.target.value)))},required:!0})]}),Object(ut.jsx)("button",{className:"basic-button",type:"submit","aria-label":"submit",disabled:!!t.loading&&"disabled",children:"Submit"})]})}),Object(ut.jsx)("ul",{children:b})]}):null]})}))),Nt=(n(50),Object(a.b)((function(t){return{topics:t.topics.topics,loading:t.flash.loading}}),(function(t){return{onGetTopics:function(){t((function(t){t(G(!0)),t(ot([])),fetch("".concat(J,"/posts/topics")).then((function(t){return t.json()})).then((function(e){if(console.log(e),e.error)throw new Error(e.error);t(ot(e.topics)),t(G(!1))})).catch((function(e){t(G(!1)),t(A(e.message))}))}))},onSetSidebar:function(e,n,o){t(st(e,n,o))}}}))((function(t){Object(o.useEffect)((function(){t.onGetTopics(),t.onSetSidebar(!0,"","")}),[]);var e=t.topics.map((function(t){return Object(ut.jsxs)("li",{children:[Object(ut.jsx)(at.b,{to:"/topics/".concat(t.name),children:t.name}),Object(ut.jsx)("p",{children:t.description})]},t.topic_id)}));return Object(ut.jsxs)("section",{children:[t.loading?null:Object(ut.jsx)("h1",{className:"page-title",children:"Topics"}),Object(ut.jsx)("ul",{className:"topics-list",children:e})]})}))),yt=Object(a.b)((function(t){return{isAuth:t.auth.isAuth}}))((function(t){return t.isAuth?null:Object(ut.jsx)(c.a.Fragment,{children:t.children})})),Tt=(n(51),Object(a.b)((function(t){return{sidebar:t.sidebar.sidebar,show:t.sidebar.show,loading:t.flash.loading}}),(function(t){return{onToggleSidebar:function(){t(it())},onUserLogout:function(){t(U())},onToggleLoginModal:function(){t(H())},onToggleRegisterModal:function(){t(q())}}}))((function(t){var e=Object(o.useState)(""),n=Object(pt.a)(e,2),c=n[0],s=n[1],i=Object(r.f)();return Object(ut.jsxs)("aside",{className:"sidebar ".concat(t.show?"open":""),onClick:t.onToggleSidebar,children:[Object(ut.jsx)("form",{onSubmit:function(t){t.preventDefault(),i.push("/search?q=".concat(c)),s("")},children:Object(ut.jsxs)("div",{className:"search-bar",children:[Object(ut.jsx)("label",{htmlFor:"search"}),Object(ut.jsx)("input",{type:"text",name:"search",id:"search",placeholder:"search",value:c,onChange:function(t){s(t.target.value)},required:!0,onClick:function(t){t.stopPropagation()}}),Object(ut.jsx)("button",{type:"submit","aria-label":"search",children:Object(ut.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",children:Object(ut.jsx)("path",{d:"M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"})})})]})}),Object(ut.jsxs)("div",{className:"sidebar-links",children:[Object(ut.jsx)(at.b,{to:"/topics",children:"Topics"}),Object(ut.jsxs)(_t,{children:[Object(ut.jsx)(at.b,{to:{pathname:"/newpost",state:{topic:t.sidebar.name}},children:"New Post"}),t.sidebar.isHome?Object(ut.jsx)(at.b,{to:"/newtopic",children:"New Topic"}):null]})]}),Object(ut.jsxs)("ul",{className:"auth-links",children:[Object(ut.jsx)(yt,{children:Object(ut.jsx)("li",{children:Object(ut.jsx)("button",{className:"basic-button",disabled:!!t.loading&&"disabled",onClick:t.onToggleRegisterModal,"aria-label":"register",children:"Register"})})}),Object(ut.jsx)(yt,{children:Object(ut.jsx)("li",{children:Object(ut.jsx)("button",{className:"basic-button",disabled:!!t.loading&&"disabled",onClick:t.onToggleLoginModal,"aria-label":"login",children:"Login"})})}),Object(ut.jsx)(_t,{children:Object(ut.jsx)("li",{children:Object(ut.jsx)("button",{disabled:!!t.loading&&"disabled",className:"basic-button",onClick:t.onUserLogout,"aria-label":"logout",children:"Logout"})})})]}),Object(ut.jsxs)("div",{className:"sidebar-topic",children:[Object(ut.jsx)(at.b,{to:"/topics/".concat(t.sidebar.name),children:t.sidebar.name}),Object(ut.jsx)("p",{children:t.sidebar.description})]})]})}))),Et=Object(a.b)((function(t){return{posts:t.posts.posts}}),(function(t){return{onGetSearchPosts:function(e){t(function(t){return function(e){e(G(!0)),e(Q([]));var n=localStorage.getItem("token");if(n){var o=Object(u.a)(n).sub;t+="&user_id=".concat(o)}fetch("".concat(J,"/posts/search?q=").concat(t)).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);e(Q(t.posts)),e(G(!1))})).catch((function(t){e(A(t.message)),e(G(!1))}))}}(e))},onSetSidebar:function(e,n,o){t(st(e,n,o))}}}))((function(t){var e=Object(r.g)(),n=new URLSearchParams(e.search).get("q");Object(o.useEffect)((function(){t.onGetSearchPosts(n),t.onSetSidebar(!0,"","")}),[n]);var c=t.posts.map((function(t,e){return Object(ut.jsxs)("li",{children:[Object(ut.jsx)("div",{className:"post-number",children:Object(ut.jsx)("p",{children:e+1})}),Object(ut.jsx)("div",{className:"post-votes",children:Object(ut.jsx)(bt,{post_id:t.post_id,votes:t.votes,user_vote:t.user_vote})}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("div",{className:"post-title",children:Object(ut.jsx)(at.b,{to:"/topics/".concat(t.topic,"/").concat(t.post_id),children:t.title})}),Object(ut.jsxs)("p",{className:"post-subtitle",children:["submitted ",dt(t.time)," by"," ",Object(ut.jsx)(at.b,{className:"post-username",to:"/users/".concat(t.username),children:t.username})," ","in ",Object(ut.jsx)(at.b,{to:"/topics/".concat(t.topic),children:t.topic})]})]})]},t.post_id)}));return Object(ut.jsx)("section",{className:"Home",children:Object(ut.jsx)("ul",{className:"posts-list",children:c})})})),Ct=(n(25),Object(a.b)((function(t){return{error:t.flash.error,timeout:t.flash.timeout}}),(function(t){return{onSetError:function(e){t(A(e))},onSetTimeout:function(e){t(z(e))}}}))((function(t){var e=null;return Object(o.useEffect)((function(){clearTimeout(t.timeout);""!==t.error&&t.onSetTimeout(setTimeout((function(){t.onSetError("")}),5e3))}),[t.error]),""!==t.error&&(e=Object(ut.jsx)("div",{className:"Flash error",onClick:function(){return t.onSetError("")},children:Object(ut.jsx)("h1",{children:t.error})})),e}))),It=Object(a.b)((function(t){return{success:t.flash.success,timeout:t.flash.timeout}}),(function(t){return{onSetSuccess:function(e){t(F(e))},onSetTimeout:function(e){t(z(e))}}}))((function(t){var e=null;return Object(o.useEffect)((function(){clearTimeout(t.timeout);""!==t.success&&t.onSetTimeout(setTimeout((function(){t.onSetSuccess("")}),5e3))}),[t.success]),""!==t.success&&(e=Object(ut.jsx)("div",{className:"Flash success",onClick:function(){return t.onSetSuccess("")},children:Object(ut.jsx)("h1",{children:t.success})})),e})),Pt=Object(a.b)((function(t){return{loading:t.flash.loading}}),(function(t){return{}}))((function(t){var e=null;return t.loading&&(e=Object(ut.jsx)("div",{className:"Flash loading",children:Object(ut.jsxs)("div",{className:"lds-ellipsis",children:[Object(ut.jsx)("div",{}),Object(ut.jsx)("div",{}),Object(ut.jsx)("div",{}),Object(ut.jsx)("div",{})]})})),e})),Lt=Object(a.b)((function(t){return{posts:t.posts.posts,loading:t.flash.loading}}),(function(t){return{onGetUserPosts:function(e){t(function(t){return function(e){e(G(!0)),e(Q([]));var n=localStorage.getItem("token"),o="";if(n){var c=Object(u.a)(n).sub;o="?user_id=".concat(c)}fetch("".concat(J,"/posts/user/").concat(t).concat(o)).then((function(t){return t.json()})).then((function(t){if(t.error)throw new Error(t.error);e(Q(t.posts)),e(G(!1))})).catch((function(t){e(A(t.message)),e(G(!1))}))}}(e))},onSetSidebar:function(e,n,o){t(st(e,n,o))}}}))((function(t){var e=Object(r.h)().username;Object(o.useEffect)((function(){t.onGetUserPosts(e),t.onSetSidebar(!0,"","")}),[e]);var n=t.posts.map((function(t,e){return Object(ut.jsxs)("li",{children:[Object(ut.jsx)("div",{className:"post-number",children:Object(ut.jsx)("p",{children:e+1})}),Object(ut.jsx)("div",{className:"post-votes",children:Object(ut.jsx)(bt,{post_id:t.post_id,votes:t.votes,user_vote:t.user_vote})}),Object(ut.jsxs)("div",{children:[Object(ut.jsx)("div",{className:"post-title",children:Object(ut.jsx)(at.b,{to:"/topics/".concat(t.topic,"/").concat(t.post_id),children:t.title})}),Object(ut.jsxs)("p",{className:"post-subtitle",children:["submitted ",dt(t.time)," by"," ",Object(ut.jsx)("span",{className:"post-username",children:t.username})," in"," ",Object(ut.jsx)(at.b,{to:"/topics/".concat(t.topic),children:t.topic})]})]})]},t.post_id)}));return Object(ut.jsxs)("section",{className:"Home",children:[Object(ut.jsx)("h1",{className:"page-title",children:e}),Object(ut.jsx)("ul",{className:"posts-list",children:n})]})})),kt=Object(a.b)((function(t){return{registerModal:t.auth.registerModal,loginModal:t.auth.loginModal}}),(function(t){return{onAuthorize:function(e){t(B(e))}}}))((function(t){return Object(o.useEffect)((function(){if(function(){var t=localStorage.getItem("expires");return t&&Number(t)>Date.now()}()){var e=Object(u.a)(localStorage.getItem("token"));t.onAuthorize(e.sub)}}),[]),Object(ut.jsxs)("div",{className:"App",children:[Object(ut.jsx)(rt,{}),Object(ut.jsx)(lt,{}),Object(ut.jsx)(Ct,{}),Object(ut.jsx)(It,{}),Object(ut.jsx)(Pt,{}),Object(ut.jsxs)("div",{className:"main-grid",children:[Object(ut.jsx)("main",{children:Object(ut.jsxs)(r.c,{children:[Object(ut.jsx)(r.a,{path:"/",exact:!0,children:Object(ut.jsx)(jt,{})}),Object(ut.jsx)(r.a,{path:"/newpost",children:Object(ut.jsx)(Ot,{})}),Object(ut.jsx)(r.a,{path:"/newtopic",children:Object(ut.jsx)(gt,{})}),Object(ut.jsx)(r.a,{path:"/search",children:Object(ut.jsx)(Et,{})}),Object(ut.jsx)(r.a,{path:"/users/:username",children:Object(ut.jsx)(Lt,{})}),Object(ut.jsx)(r.a,{path:"/topics",exact:!0,children:Object(ut.jsx)(Nt,{})}),Object(ut.jsx)(r.a,{path:"/topics/:topic",exact:!0,children:Object(ut.jsx)(xt,{})}),Object(ut.jsx)(r.a,{path:"/topics/:topic/:post_id",exact:!0,children:Object(ut.jsx)(wt,{})})]})}),t.registerModal?Object(ut.jsx)(ht,{}):null,t.loginModal?Object(ut.jsx)(ft,{}):null,Object(ut.jsx)(Tt,{})]})]})})),Rt=n(19),Mt=n(27),Dt={isAuth:!1,user_id:null,registerModal:!1,loginModal:!1},At=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{isAuth:!0,user_id:e.user_id})},Ft=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{isAuth:!1,user_id:null})},Gt=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{registerModal:!t.registerModal})},zt=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{loginModal:!t.loginModal})},Bt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:return At(t,e);case d:return Ft(t);case b:return Gt(t);case j:return zt(t);default:return t}},Ut=n(14),qt={posts:[],post:{}},Ht=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{posts:e.posts})},Jt=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{post:Object(V.a)(Object(V.a)({},e.post),{},{editing:!1})})},Vt=function(t,e){var n=Object(V.a)({},t.post);return n.editing=!n.editing,e.canceled&&(n.text=n.original),n.original=n.text,Object(V.a)(Object(V.a)({},t),{},{post:n})},Yt=function(t,e){var n=Object(V.a)({},t.post);return n.text=e.value,Object(V.a)(Object(V.a)({},t),{},{post:n})},Xt=function(t,e){var n,o=[],c=Object(Ut.a)(t.posts);try{for(c.s();!(n=c.n()).done;){var s=n.value;o.push(Object(V.a)({},s))}}catch(a){c.e(a)}finally{c.f()}var i=o.findIndex((function(t){return t.post_id===e.post_id}));o[i].user_vote=e.vote;var r=t.posts[i].user_vote;return 1===r&&-1===e.vote?o[i].votes-=2:-1===r&&1===e.vote?o[i].votes+=2:1===r||-1===e.vote?o[i].votes-=1:-1!==r&&1!==e.vote||(o[i].votes+=1),Object(V.a)(Object(V.a)({},t),{},{posts:o})},Zt=function(t,e){var n=Object(V.a)({},t.post);n.user_vote=e.vote;var o=t.post.user_vote;return 1===o&&-1===e.vote?n.votes-=2:-1===o&&1===e.vote?n.votes+=2:1===o||-1===e.vote?n.votes-=1:-1!==o&&1!==e.vote||(n.votes+=1),Object(V.a)(Object(V.a)({},t),{},{post:n})},Wt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case m:return Ht(t,e);case p:return Jt(t,e);case h:return Vt(t,e);case f:return Yt(t,e);case O:return Xt(t,e);case g:return Zt(t,e);default:return t}},Kt={topics:[]},Qt=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{topics:e.topics})},$t=function(t,e){var n,o=[],c=Object(Ut.a)(t.topics);try{for(c.s();!(n=c.n()).done;){var s=n.value;o.push(Object(V.a)({},s))}}catch(i){c.e(i)}finally{c.f()}return Object(V.a)(Object(V.a)({},t),{},{topics:[].concat(o,[e.topic])})},te=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case C:return Qt(t,e);case I:return $t(t,e);default:return t}},ee={sidebar:{isHome:!0,name:"",description:""},show:!1},ne=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{sidebar:{isHome:e.isHome,name:e.name,description:e.description}})},oe=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{show:!t.show})},ce=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ee,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case P:return ne(t,e);case L:return oe(t);default:return t}},se=n(28),ie={comments:[]},re=function(t){var e,n=[],o=Object(Ut.a)(t);try{for(o.s();!(e=o.n()).done;){var c=e.value;n.push(Object(V.a)({},c))}}catch(s){o.e(s)}finally{o.f()}return n},ae=function(t,e){var n,o=e.comments,c=Object(Ut.a)(o);try{for(c.s();!(n=c.n()).done;){var s=n.value;s.reply="",s.showReply=!1,s.editing=!1,s.show=!0}}catch(i){c.e(i)}finally{c.f()}return Object(V.a)(Object(V.a)({},t),{},{comments:e.comments})},ue=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{comments:[].concat(Object(se.a)(t.comments),[Object(V.a)(Object(V.a)({},e.comment),{},{reply:"",showReply:!1,editing:!1,show:!0})])})},le=function(t,e){var n=re(t.comments),o=n.findIndex((function(t){return t.comment_id===Number(e.comment_id)}));return n[o].showReply=!n[o].showReply,Object(V.a)(Object(V.a)({},t),{},{comments:n})},de=function(t,e){var n=re(t.comments),o=n.findIndex((function(t){return t.comment_id===Number(e.comment_id)}));return n[o].reply=e.value,Object(V.a)(Object(V.a)({},t),{},{comments:n})},be=function(t,e){var n=re(t.comments),o=n.findIndex((function(t){return t.comment_id===Number(e.comment_id)}));return n[o].reply="",Object(V.a)(Object(V.a)({},t),{},{comments:n})},je=function(t,e){var n=re(t.comments),o=n.findIndex((function(t){return t.comment_id===Number(e.comment_id)}));return n[o].text="[deleted]",n[o].user_id=11,n[o].username="[deleted]",Object(V.a)(Object(V.a)({},t),{},{comments:n})},me=function(t,e){var n=re(t.comments),o=n.findIndex((function(t){return t.comment_id===Number(e.comment_id)}));return n[o].editing=!n[o].editing,e.canceled&&(n[o].text=n[o].original),n[o].original=n[o].text,Object(V.a)(Object(V.a)({},t),{},{comments:n})},pe=function(t,e){var n=re(t.comments),o=n.findIndex((function(t){return t.comment_id===Number(e.comment_id)}));return n[o].text=e.value,Object(V.a)(Object(V.a)({},t),{},{comments:n})},he=function(t,e){var n=re(t.comments),o=n.findIndex((function(t){return t.comment_id===Number(e.comment_id)}));return n[o].show=!n[o].show,Object(V.a)(Object(V.a)({},t),{},{comments:n})},fe=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case E:return ae(t,e);case x:return ue(t,e);case v:return le(t,e);case _:return de(t,e);case S:return be(t,e);case w:return je(t,e);case N:return me(t,e);case y:return pe(t,e);case T:return he(t,e);default:return t}},Oe={success:"",error:"",loading:!1,timeout:null},ge=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{error:e.error,success:""})},xe=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{success:e.success,error:""})},ve=function(t,e){var n={};return e.loading&&(n.error="",n.success=""),Object(V.a)(Object(V.a)(Object(V.a)({},t),n),{},{loading:e.loading})},_e=function(t,e){return Object(V.a)(Object(V.a)({},t),{},{timeout:e.timeout})},Se=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case k:return ge(t,e);case R:return xe(t,e);case M:return ve(t,e);case D:return _e(t,e);default:return t}},we=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Rt.c,Ne=Object(Rt.b)({auth:Bt,posts:Wt,comments:fe,topics:te,sidebar:ce,flash:Se}),ye=Object(Rt.d)(Ne,we(Object(Rt.a)(Mt.a)));i.a.render(Object(ut.jsx)(c.a.StrictMode,{children:Object(ut.jsx)(a.a,{store:ye,children:Object(ut.jsx)(at.a,{children:Object(ut.jsx)(kt,{})})})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.d194a2e6.chunk.js.map